<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>토스 현금영수증 API</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="https://static.toss.im/tds/favicon/favicon.ico" />
    <link rel="icon" type="image/png" sizes="16x16" href="https://static.toss.im/tds/favicon/favicon-16x16.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="https://static.toss.im/tds/favicon/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="48x48" href="https://static.toss.im/tds/favicon/favicon-48x48.png" />
    <link rel="icon" type="image/png" sizes="196x196" href="https://static.toss.im/tds/favicon/favicon-196x196.png" />
    <link rel="apple-touch-icon" sizes="57x57" href="https://static.toss.im/tds/favicon/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="https://static.toss.im/tds/favicon/apple-touch-icon-72x72.png" />
    <link
      rel="apple-touch-icon"
      sizes="114x114"
      href="https://static.toss.im/tds/favicon/apple-touch-icon-114x114.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="120x120"
      href="https://static.toss.im/tds/favicon/apple-touch-icon-120x120.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="144x144"
      href="https://static.toss.im/tds/favicon/apple-touch-icon-144x144.png"  
    />
    <link
      sizes="152x152"
      href="https://static.toss.im/tds/favicon/apple-touch-icon-152x152.png"fdsffsdf
    />
    <meta name="msapplication-TileImage" content="https://static.toss.im/tds/favicon/mstile-144x144.png" />

    <!-- stylesheets -->
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css"
      integrity="sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ=="
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" />
    <link rel="stylesheet" type="text/css" href="css/prism.css" />
    <link rel="stylesheet" type="text/css" href="css/tossdev.css" />

    <!-- javascript -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
    <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"
      integrity="sha512-K1qjQ+NcF2TYO/eI3M6v8EiNYZfA95pQumfvcVrTHtwQVDG+aHRqLi/ETn2uB+1JqwYqVG3LIvdm9lj6imS/pQ=="
      crossorigin="anonymous"
    ></script>
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>

  <body id="docs" data-spy="scroll" data-target="#guide">
    <!-- Google Tag Manager -->
    <noscript
      ><iframe
        src="//www.googletagmanager.com/ns.html?id=GTM-TPTMLG"
        height="0"
        width="0"
        style="display:none;visibility:hidden"
      ></iframe
    ></noscript>
    <script>
      (function(w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != 'dataLayer' ? '&l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, 'script', 'dataLayer', 'GTM-TPTMLG');
    </script>


    <!-- End Google Tag Manager -->
    <div id="guide">
      <h1 class="logo">
          <img src="https://static.toss.im/tds/icon/svg/logo-only-icon.svg" alt="toss developers logo"/>
          <span>현금영수증 API V2</span>
      </h1>
      
    </div>

    <div id="api-docs">
      <div id="methods">
        <div class="languages">
          <a class="language selected" data-lang="php" href="#">PHP</a>
          <a class="language" data-lang="java" href="#">Java</a>
          <a class="language" data-lang="curl" href="#">curl</a>
          <a class="language" data-lang="python" href="#">Python</a>
          <a class="language" data-lang="ruby" href="#">Ruby</a>
          <a class="language" data-lang="aspnet" href="#">ASP</a>
        </div>
        <div class="method" id="intro">
          <div class="method-section clearfix">
            <div class="method-description">
              <h3>현금영수증 API V2 소개</h3>
              <p>
                본 문서는 토스 결제 가맹점에서 현금영수증을 발급하거나 취소, 상태 확인 및 현금영수증 이미지 주소를 얻고자 할 때 사용할 API 에 대한 가이드를 제공합니다.<br>
                토스 결제 가맹점에서는 해당하는 현금영수증 API 를 이용하여 국세청으로 현금영수증을 등록 및 취소, 상태 확인 등을 할 수 있습니다.<br>
                이를 위해 토스에서는 토스페이먼츠(PG)를 통해 가맹점에게 현금영수증 API 를 제공하고, 토스페이먼츠(PG)를 통해 국세청으로 정상 등록이 되면 익일 동기화 작업을 거쳐서 통상 2일 안에 현금영수증의 발급이 완료됩니다.<br>
              </p>
            </div>

             </div>
          </div>
        </div>
      </div>

    <script type="text/javascript">
      $(function() {
        // language toggle
        var $languages = $('.languages .language');
        $languages.click(function(e) {
          e.preventDefault();
          var lang = $(this).data('lang');
          $languages.removeClass('selected');
          $(this).addClass('selected');

          $('pre code').hide();
          $('pre code.' + lang).css('display', 'block');
        });
        $('pre code.' + $('.language.selected').data('lang')).css('display', 'block');
      });
    </script>
    <script src="js/prism.js"></script>
  </body>
<head>
    <title>토스 현금영수증 발급 API</title>
</head>
<body>
    <button onclick="issueCashReceipt()">현금영수증 발급</button>

    <script>
        function issueCashReceipt() {
            const apiKey = "example_api_key"; // 결제 가맹점의 apiKey
            const payToken = "example_payToken"; // 결제 토큰
            const cashReceiptKey = "01001230123"; // 발급 주체를 식별할 수 있는 key 값
            const cashReceiptKeyType = "PHONE"; // 현금영수증 keyType (PHONE, CORPORATE, CARD)
            const cashReceiptPurpose = "DEDUCTION"; // 현금영수증 발급 목적 (DEDUCTION 또는 EVIDENCE)

            const apiUrl = "https://pay.toss.im/api/v2/issue-cash-receipt";

            // API 요청 데이터
            const requestData = {
                apiKey: apiKey,
                payToken: payToken,
                cashReceiptKey: cashReceiptKey,
                cashReceiptKeyType: cashReceiptKeyType,
                cashReceiptPurpose: cashReceiptPurpose,
            };

            // API 호출
            fetch(apiUrl, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify(requestData),
            })
                .then((response) => response.json())
                .then((data) => {
                    // API 응답 처리
                    if (data.status === 200 && data.code === 0) {
                        alert("현금영수증이 발급되었습니다.");
                        console.log("발급 요청된 현금영수증 관리번호: " + data.cashReceiptMgtKey);
                        console.log("공급가액: " + data.supplyCost);
                        console.log("부가세: " + data.tax);
                        console.log("봉사료: " + data.serviceFee);
                    } else {
                        alert("현금영수증 발급에 실패하였습니다.");
                    }
                })
                .catch((error) => {
                    console.error("API 호출 중 오류 발생: " + error);
                });
        }
    </script>
</body>
</html>
