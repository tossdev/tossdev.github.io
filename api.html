<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>토스 결제 API</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" type="image/x-icon" href="https://toss.im/assets/img/favicon.ico">

    <!-- stylesheets -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" integrity="sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="css/prism.css" />
    <link rel="stylesheet" type="text/css" href="css/tossdev.css" />

    <!-- javascript -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js" integrity="sha512-K1qjQ+NcF2TYO/eI3M6v8EiNYZfA95pQumfvcVrTHtwQVDG+aHRqLi/ETn2uB+1JqwYqVG3LIvdm9lj6imS/pQ==" crossorigin="anonymous"></script>
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>

<body id="docs" data-spy="scroll" data-target="#guide">
    <!-- Google Tag Manager -->
    <noscript>
        <iframe src="//www.googletagmanager.com/ns.html?id=GTM-TPTMLG" height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>
    <script>
        (function (w, d, s, l, i) {
            w[l] = w[l] || [];
            w[l].push({
                'gtm.start': new Date().getTime(),
                event: 'gtm.js'
            });
            var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s),
                dl = l != 'dataLayer' ? '&l=' + l : '';
            j.async = true;
            j.src =
                '//www.googletagmanager.com/gtm.js?id=' + i + dl;
            f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-TPTMLG');
    </script>
    <!-- End Google Tag Manager -->
    <div id="guide">
        <h1 class="logo">
            <a href="index.html"><img src="images/logo_tossdev.png" alt="toss developers logo"></a>
        </h1>
        <ul class="menu nav">
            <h5>Toss 결제 API</h5>
            <li>
                <a href="#intro">소개</a>
            </li>
            <li>
                <a href="#state">결제 상태</a>
            </li>
            <li>
                <a href="#maintenance">은행별 정기 점검시간</a>
            </li>
            <li>
                <a href="#httpResponse">HTTP 응답 코드</a>
            </li>
            <h5>API 목록</h5>
            <li>
                <a href="#payments">결제 생성</a>
            </li>
            <li>
                <a href="#execute">결제 승인</a>
            </li>
            <li>
                <a href="#cancel">결제 취소</a>
            </li>
            <li>
                <a href="#refunds">결제 환불</a>
            </li>
            <li>
                <a href="#status">결제 상태 확인</a>
            </li>
            <li>
                <a href="#refundStatus">환불 상태 확인</a>
            </li>
            <li>
                <a href="#escrow">에스크로 결제 진행</a>
            </li>
        </ul>
    </div>

    <div id="api-docs">
        <div id="methods">
            <div class="languages">
                <a class="language selected" data-lang="php" href="#">PHP</a>
                <a class="language" data-lang="java" href="#">Java</a>
                <a class="language" data-lang="curl" href="#">curl</a>
                <a class="language" data-lang="python" href="#">Python</a>
                <a class="language" data-lang="ruby" href="#">Ruby</a>
                <a class="language" data-lang="aspnet" href="#">ASP</a>
            </div>
            <div class="method" id="intro">
                <div class="method-section clearfix">
                    <div class="method-description">
                        <h3>Toss 결제 API 소개</h3>
                        <p>
                            Toss를 통한 결제 서비스를 사용하기 위한 API입니다. Toss 결제를 활용한 개발을 처음 시작하신다면, 좀 더 친절한 안내를 먼저 확인해보세요!
                            <br>
                            <br><a href="gettingstarted.html">&gt;&gt; '토스 결제 시작하기' 문서로 바로가기</a>
                        </p>

                        <div class="alert alert-warning" role="alert">
                          <i class="fa fa-exclamation-triangle pull-left" aria-hidden="true" style="margin-top:8px;margin-left:6px"></i>
                            pay.toss.im의 결제 API HTTPS는 TLS v1.1, v1.2만을 지원합니다. <br />
                            웹뷰를 통해 토스 결제를 실행할 경우, Android 5.0(롤리팝), iOS 5.0 이상에서만 동작합니다.
                        </div>
                    </div>
                </div>
            </div>
            <div class="method" id="state">
                <div class="method-section clearfix">
                    <div class="method-description">
                        <h3>결제 상태</h3>
                        <p>
                            결제 건이 생성된 후, 결제가 진행됨에 따라 결제 상태가 변경되며, 각 결제 상태마다 판매자 또는 구매자가 요청할 수 있는 행동도 변합니다. 아래는 결제 상태 목록과 각 상태에 대한 설명입니다.
                        </p>
                        <p>
                            생성된 결제의 현재 상태를 파악하려면 <a href="#statusCheck">결제 상태 확인 API</a>를 활용하세요.
                        </p>
                        <div class="info">
                            <h4>결제 상태 목록</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    PAY_STANDBY
                                </div>
                                <div class="desc">
                                    결제 대기 중
                                    <br /> : 결제 건이 생성되었고, 구매자의 결제 진행을 대기 중인 상태. 이 상태에서 구매자나 가맹점이 결제를 취소할 수 있습니다. 또한 설정한 '만료 기간'이 도래하면 자동으로 취소됩니다.
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    PAY_APPROVED
                                    <span class="type">수동 승인 설정 시</span>
                                </div>
                                <div class="desc">
                                    구매자 인증 완료
                                    <br /> : 결제를 위한 구매자 인증 완료되고, 가맹점의 최종 승인을 기다리는 상태.
                                    <br />(결제 생성 시 'autoExecute'를 false로 설정한 경우에만 이 단계를 거칩니다)
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    PAY_CANCEL
                                </div>
                                <div class="desc">
                                    결제 취소
                                    <br /> : 결제가 완료되기 전에 구매자나 가맹점이 결제를 취소한 상태입니다. (결론적으론 금액의 이동 없이 종료된 건)
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    PAY_PROGRESS
                                </div>
                                <div class="desc">
                                    결제 진행 중
                                    <br /> : 구매자가 결제를 승인하여 구매자의 계좌에서 결제 금액을 출금 처리 중인 상태입니다.
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    PAY_COMPLETE
                                </div>
                                <div class="desc">
                                    결제 완료
                                    <br /> : 구매자 및 가맹점의 결제 승인 및 출금이 정상적으로 완료된 상태입니다. 에스크로 결제 건의 경우, 자동으로 '배송등록 대기 중' 상태로 변경됩니다.
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    ESCROW_REQUEST
                                    <span class="type">에스크로 only</span>
                                </div>
                                <div class="desc">
                                    배송등록 대기 중 (에스크로 요청)
                                    <br /> : 에스크로 결제 건이 결제 완료된 후, 매매보호에 들어간 상태입니다. 판매자가 '배송 등록'을 하면 '구매확정 대기 중' 상태로 변경되며, 120일 동안 배송 등록을 하지 않는 경우에도 자동으로 '구매확정 대기 중' 상태로 변경됩니다.
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    ESCROW_RELEASE
                                    <span class="type">에스크로 only</span>
                                </div>
                                <div class="desc">
                                    구매확정 대기 중 (에스크로 해제)
                                    <br /> : 판매자가 '배송 등록'을 완료하고 구매자의 '구매 확정'을 대기 중인 상태입니다. 구매자가 구매 확정을 하면 판매자 대금 지급 과정을 시작하고, 구매자가 지급을 거부하면 '구매자 지급 거부' 상태로 변경됩니다.
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    ESCROW_DENY
                                    <span class="type">에스크로 only</span>
                                </div>
                                <div class="desc">
                                    구매자 지급 거부 (에스크로 거부)
                                    <br /> : 구매자가 지급을 거절한 상태입니다. 판매자는 이 건을 전액 환불 처리하거나 구매자에게 '구매 확정'을 다시 요청할 수 있습니다.
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    REFUND_PROGRESS
                                </div>
                                <div class="desc">
                                    환불 진행 중
                                    <br /> : 전액 또는 부분 환불을 진행 중인 상태로, 완료되기 전 까지 다른 환불을 진행할 수 없습니다.
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    REFUND_SUCCESS
                                </div>
                                <div class="desc">
                                    환불 성공
                                    <br /> : 전액 또는 부분 환불이 완료되어, 환불 처리한 금액이 구매자의 계좌로 입금 완료된 상태입니다.
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    SETTLEMENT_COMPLETE
                                </div>
                                <div class="desc">
                                    정산 완료
                                    <br /> : 결제 완료된 금액에 대해 정산이 완료되어 더 이상 환불이 불가한 상태입니다. (승인일 또는 구매 확정일로부터 180일 경과)
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    SETTLEMENT_REFUND_COMPLETE
                                </div>
                                <div class="desc">
                                    환불 정산 완료
                                    <br /> : 전액 또는 부분 환불에 대한 정산이 완료되어 더 이상 환불이 불가한 상태입니다. (승인일 또는 구매 확정일로부터 180일 경과했거나 전액 환불에 대한 정산 완료된 경우)
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="method-example">
                        <pre>
              <code class="curl">
              </code>
              <code class="java">
              </code>
              <code class="pho">
              </code>
            </pre>
                    </div>
                </div>
            </div>
            <div class="method" id="maintenance">
                <div class="method-section clearfix">
                    <div class="method-description">
                        <h3>은행 정기 점검시간</h3>
                        <p>은행 점검 시간에는 해당 은행 계좌를 통한 결제 생성/환불이 불가합니다.</p>
                        <div class="info">
                            <h4>전체 은행 공통 점검시간</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    (매일)
                                </div>
                                <div class="desc">
                                    23:20 ~ 익일 00:40
                                </div>
                            </div>
                        </div>
                        <div class="info">
                            <h4>은행별 정기 점검시간</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    KDB산업
                                </div>
                                <div class="desc">
                                    매주 일요일 00:00~04:00
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    IBK기업
                                </div>
                                <div class="desc">

                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    KB국민
                                </div>
                                <div class="desc">
                                    매월 세번째 (not 셋째주) 일요일 전날 23:50~00:30, 일요일 05:00~05:30
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    외환은행
                                </div>
                                <div class="desc">

                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    수협은행
                                </div>
                                <div class="desc">

                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    NH농협
                                </div>
                                <div class="desc">
                                    매월 셋째주 월요일 00:00~04:00
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    우리은행
                                </div>
                                <div class="desc">
                                    매주 목요일 23:45 ~ 금요일 00:45, 매달 둘째주 일요일 02:00 ~ 06:00
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    SC은행
                                </div>
                                <div class="desc">

                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    신한은행
                                </div>
                                <div class="desc">

                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    씨티은행
                                </div>
                                <div class="desc">
                                    공휴일 다음날(매주 월요일 포함) 00:00~02:00
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    대구은행
                                </div>
                                <div class="desc">
                                    분기말에 한번 토요일 00:00~06:00
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    부산은행
                                </div>
                                <div class="desc">
                                    매월 셋째주 월요일 00:00~04:00
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    광주은행
                                </div>
                                <div class="desc">
                                    둘째주 일요일 02:00~06:00
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    제주은행
                                </div>
                                <div class="desc">
                                    월, 목 04:30~05:00
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    전북은행
                                </div>
                                <div class="desc">
                                    매월 둘째주 토요일 00:00~04:00
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    경남은행
                                </div>
                                <div class="desc">
                                    매월 둘째주 일요일 00:00~03:00
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    새마을은행
                                </div>
                                <div class="desc">

                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    신협은행
                                </div>
                                <div class="desc">

                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    저축은행
                                </div>
                                <div class="desc">

                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    우체국
                                </div>
                                <div class="desc">
                                    매일 04:00~05:00 점검
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    하나은행
                                </div>
                                <div class="desc">

                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="method-example">
                        <pre>
                          <code class="curl">
                          </code>
                          <code class="java">
                          </code>
                          <code class="pho">
                          </code>
                        </pre>
                    </div>
                </div>
            </div>
            <div class="method" id="httpResponse">
                <div class="method-section clearfix">
                    <div class="method-description">
                        <h3>HTTP 응답 코드</h3>
                        <div class="info">
                            <h4>HTTP Response Code</h4>
                            <div class="field clearfix">
                                <div class="key">200</div>
                                <div class="desc">
                                    OK : 정상
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">400</div>
                                <div class="desc">
                                    Bad Request : 파라미터 오류
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">401</div>
                                <div class="desc">
                                    Unauthorized : 가맹점 key 오류
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">404</div>
                                <div class="desc">
                                    Not Found : 존재하지 않는 요청
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">50x</div>
                                <div class="desc">
                                    Server error : 서버 오류
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="method-example">
                        <pre>
              <code class="curl">
              </code>
              <code class="java">
              </code>
              <code class="pho">
              </code>
            </pre>
                    </div>
                </div>
            </div>
            <div class="method" id="payments">
                <div class="method-section clearfix">
                    <div class="method-description">
                        <h3>결제 생성</h3>
                        <p>
                            결제 건을 생성합니다.
                        </p>
                        <p>
                            결제 생성 완료 후, 구매자의 승인을 얻어 완료처리하는 방법은 아래 문서를 참고하세요.
                            <br>
                            <a href="gettingstarted.html#overview-3">토스 결제 시작하기 > 3. 구매자 승인 받기</a>
                        </p>
                        <div class="info">
                            <h4>endpoint</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    (POST)
                                </div>
                                <div class="desc">
                                  https://pay.toss.im/api/v1/payments <br/>
                                  <p> 
                                  (이전) https://toss.im/tosspay/api/v1/payments
                                  </p>
                                </div>
                            </div>
                        </div>
                        <div class="info">
                            <h4>parameters</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    apiKey
                                    <span class="type">String</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    가맹점 key
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    orderNo
                                    <span class="type">String</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    가맹점의 상품 주문번호
                                    <br>
                                    <span class="text-muted">주문번호는 50자 이내여야 하고, '숫자, 영문자, 특수문자 _-:.^@'만 사용할 수 있습니다.</span>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    amount
                                    <span class="type">Integer</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    결제 금액
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    productDesc
                                    <span class="type">String</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    상품 설명
                                    <br>
                                    <span class="text-muted">상품 설명은 공백으로만 설정할 수 없고, 백슬래시(\)와 따옴표(",')를 포함할 수 없으며 총 255자 이내여야 합니다.</span>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    autoExecute
                                    <span class="type">boolean</span>
                                </div>
                                <div class="desc">
                                    자동 승인 여부 설정(기본 값: false)
                                    <br />
                                    <br>
                                    <table class="table">
                                        <tr>
                                            <td>true</td>
                                            <td>구매자 인증 완료 시, 바로 결제 완료 처리
                                                <br>(true로 설정하면 반드시 'resultCallback' 값을 설정하고 '결제 완료' callback을 받았을 때만 구매 완료 처리해야합니다)</td>
                                        </tr>
                                        <tr>
                                            <td>false</td>
                                            <td>구매자 인증 완료 후 가맹점의 최종 승인 시 결제 완료 처리
                                                <br>('결제 승인 API'를 통해 최종 승인합니다)</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    retUrl
                                    <span class="type">string</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    결제 완료 후 연결할 웹페이지의 URL (결제 최종 승인 및 완료 처리할 페이지)
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    amountTaxable
                                    <span class="type">Integer</span>
                                </div>
                                <div class="desc">
                                    결제 금액 중 과세금액 (복합과세)
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    amountTaxFree
                                    <span class="type">Integer</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    결제 금액 중 비과세금액 (복합과세), 없으면 0으로 설정
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    amountVat
                                    <span class="type">Integer</span>
                                </div>
                                <div class="desc">
                                    결제 금액 중 부가세 (복합과세)
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    amountServiceFee
                                    <span class="type">Integer</span>
                                </div>
                                <div class="desc">
                                    결제 금액 중 봉사료 (복합과세)
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    expiredTime
                                    <span class="type">Timestamp</span>
                                </div>
                                <div class="desc">
                                    결제 만료 기한 (기본값 15분, 최대 1시간 설정 가능)
                                    <br>형식 : 1970-01-01 00:00:00
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    resultCallback
                                    <span class="type">String</span>
                                    <span class="type">자동 승인 설정시 필수</span>
                                </div>
                                <div class="desc">
                                    결제 결과 callback URL (성공, 취소, 환불 등)
                                    <br />
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    escrow
                                    <span class="type">boolean</span>
                                </div>
                                <div class="desc">
                                    에스크로 결제 여부 (기본값 false)
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    cashReceipt
                                    <span class="type">boolean</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    현금영수증 발급 가능 여부 
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    checkoutType
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    결제창 타입을 선택합니다. (앱/웹) 지문인증을 지원하려면 'app' 또는 'both'를 선택하세요. (기본값 web)
                                    <br />
                                    <br />
                                    <table class="table">
                                        <tr>
                                            <td>web</td>
                                            <td>토스 앱 없이 웹에서 결제</td>
                                        </tr>
                                        <tr>
                                            <td>app</td>
                                            <td>토스 앱을 통해서만 결제 가능</td>
                                        </tr>
                                        <tr>
                                            <td>both</td>
                                            <td>웹결제 / 앱을 통한 결제를 구매자가 선택</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    arsAuthSkippable
                                    <span class="type">character</span>
                                </div>
                                <div class="desc">
                                    인증된 기기에서 다시 결제할 때 ARS 인증 생략 여부를 설정합니다. (기본값 'Y')
                                    <br />
                                    <br />
                                    <table class="table">
                                        <tr>
                                            <td>Y</td>
                                            <td>인증된 기기에서는 ARS 인증 생략</td>
                                        </tr>
                                        <tr>
                                            <td>N</td>
                                            <td>인증 여부와 관계 없이 ARS 인증 제공</td>
                                        </tr>
                                    </table>
                                    * 고환금성 거래인 경우, 'N'으로 설정할 것을 권장합니다.<br>
                                    * checkoutType 값이 web/both인 경우에만 적용되는 설정입니다.
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    userPhone
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    구매자가 결제 시 이용할 휴대전화번호 지정
                                    <br /> (지정 시 구매자가 번호를 변경할 수 없으므로 전화번호 정보가 정확할 때만 이용하십시오)
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    partnerId
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    가맹점 서비스의 User ID
                                    <br /> (본 parameter를 통해 User ID를 전송하면 재결제 시 전화번호 입력 없이 사용자를 식별하여 결제 과정이 더 간단해집니다)
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    metadata
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    결제와 연관된 추가 데이터
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    retCancelUrl
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    토스 브릿지 페이지에서 사용자가 결제를 중단할때 사용자를 이동시킬 가맹점 페이지
                                </div>
                            </div>
                        </div>
                        <div class="info">
                            <h4>response</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    code
                                </div>
                                <div class="desc">
                                    응답코드
                                    <br />
                                    <br />
                                    <table class="table">
                                        <tr>
                                            <td>0</td>
                                            <td>성공</td>
                                        </tr>
                                        <tr>
                                            <td>-1</td>
                                            <td>실패 (실패사유는 msg와 errorCode 제공)</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    checkoutPage
                                </div>
                                <div class="desc">
                                    생성된 결제를 진행하는 웹페이지 URL (구매자를 이 URL로 보내야 함)
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    payToken
                                </div>
                                <div class="desc">
                                    Toss 결제 토큰
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    msg
                                </div>
                                <div class="desc">
                                    응답이 성공이 아닌 경우 설명 메세지
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    errorCode
                                </div>
                                <div class="desc">
                                    에러 코드
                                    <br />
                                    <br />
                                    <table class="table">
                                        <tr>
                                            <td>COMMON_INVALID_PARAMETER</td>
                                            <td>요청한 값이 부족하거나 올바르지 않습니다.</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <h4>결제 결과 Callback (resultCallback)</h4>
                        <p>
                            결제 상태가 변경될 때 토스가 판매자에게 변경 사항을 알립니다. 자동 승인 설정을 사용 시 (autoExecute가 true) 필수적으로 활용해야합니다.
                        </p>
                        <p>
                            * 생성된 결제 건에 resultCallback 파라미터 값이 있을 경우에만 동작합니다.
                        </p>
                        <div class="info">
                            <h4>parameter</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    status
                                </div>
                                <div class="desc">
                                    PAY_SUCCESS, PAY_CANCEL, REFUND_SUCCESS 중 하나
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    payToken
                                </div>
                                <div class="desc">
                                    Toss 결제 토큰
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    orderNo
                                </div>
                                <div class="desc">
                                    Toss 결제와 이어진 주문번호
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    metadata
                                </div>
                                <div class="desc">
                                    결제 생성 시 저장한 연관 정보
                                </div>
                            </div>
                        </div>
                        <div class="info">
                            <h4>response</h4>
                            <div class="field clearfix">
                                <div class="key">
                                </div>
                                <div class="desc">
                                    기대하지 않음 (미사용)
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="method-example">
                        <div class="title">Definition</div>
                        <pre><code class="language-bash always-visible">POST https://pay.toss.im/api/v1/payments</code></pre>
                        <div class="title">Example Request</div>
                        <pre><code class="curl language-bash">curl https://pay.toss.im/api/v1/payments \
    -H "Content-Type: application/json" \
    -d '{
        "orderNo":"2015072012211",
        "amount":10000,
        "amountTaxFree":0,
        "productDesc":"테스트결제",
        "apiKey":"sk_test_apikey1234567890"
        }'</code><code class="java language-java">URL url = null;
URLConnection connection = null;
StringBuilder responseBody = new StringBuilder();
try {
	url = new URL("https://pay.toss.im/api/v1/payments");
	connection = url.openConnection();
	connection.addRequestProperty("Content-Type", "application/json");
	connection.setDoOutput(true);
	connection.setDoInput(true);
	
	org.json.simple.JSONObject jsonBody = new JSONObject();
	jsonBody.put("orderNo", "2015072012211");
	jsonBody.put("amount", 10000);
	jsonBody.put("amountTaxFree", 0);
	jsonBody.put("productDesc", "테스트 결제");
	jsonBody.put("apiKey", "sk_test_apikey1234567890");
	jsonBody.put("expiredTime", "2015-07-20 16:21:00");
	jsonBody.put("resultCallback", "https://myshop.com/toss/result.php");
	
	BufferedOutputStream bos = new BufferedOutputStream(connection.getOutputStream());
	bos.write(jsonBody.toJSONString().getBytes());
	bos.flush();
	bos.close();
	
	BufferedReader br = new BufferedReader(new InputStreamReader(connection.getInputStream()));
	String line = null;
	while ((line = br.readLine()) != null) {
		responseBody.append(line);
	}
	br.close();
} catch (Exception e) {
	responseBody.append(e);
}
System.out.println(responseBody.toString());</code><code class="php language-php">$arrayBody = array();
$arrayBody["orderNo"] = "2015072012211";
$arrayBody["amount"] = 10000;
$arrayBody["amountTaxFree"] = 0;
$arrayBody["productDesc"] = "테스트 결제";
$arrayBody["apiKey"] = "sk_test_apikey1234567890";
$arrayBody["expiredTime"] = "2015-07-20 16:21:00";
$arrayBody["resultCallback"] = "https://myshop.com/toss/result.php";
$jsonBody = json_encode($arrayBody);

$ch = curl_init('https://pay.toss.im/api/v1/payments');
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_POSTFIELDS, $jsonBody);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, array(
    'Content-Type: application/json',
    'Content-Length: ' . strlen($jsonBody))
);
 
$result = curl_exec($ch);
curl_close($ch);
      
echo "Response: ".$result;</code><code class="aspnet language-aspnet">Dim data, httpRequest, postResponse

data = "apiKey=sk_test_apikey1234567890"
data = data & "&orderNo=2015072012211"
data = data & "&amount=10000"
data = data & "&amountTaxFree=0"
data = data & "&productDesc=ASPtestProduct"

Set httpRequest = Server.CreateObject("MSXML2.ServerXMLHTTP")
httpRequest.Open "POST", "https://pay.toss.im/api/v1/payments", False
httpRequest.SetRequestHeader "Content-Type", "application/x-www-form-urlencoded"
httpRequest.Send data

postResponse = httpRequest.ResponseText

Response.Write postResponse</code><code class="python language-python">import urllib, urllib2

url = "https://pay.toss.im/api/v1/payments"
params = {
    "orderNo": "2015072012211",
    "amount": 10000,
    "amountTaxFree": 0,
    "productDesc":"테스트 결제",
    "apiKey": "sk_test_apikey1234567890",
    "expiredTime":"2015-07-20 16:21:00",
    "resultCallback": "https://myshop.com/toss/result.php"
}

response = urllib.urlopen(url, urllib.urlencode(params))
print(response.read())</code><code class="ruby language-ruby">require 'net/http'
require 'json'

uri = URI.parse("https://pay.toss.im/api/v1/payments")

params = {
        "orderNo" => "2015072012211", 
        "amount"=> 10000,
        "amountTaxFree"=> 0,
        "productDesc" => "테스트 결제",
        "apiKey" => "sk_test_apikey1234567890",
        "expiredTime" => "2015-07-20 16:21:00",
        "resultCallback" => "https://myshop.com/toss/result.php"
}

http = Net::HTTP.new(uri.host, uri.port)
http.use_ssl = true
request = Net::HTTP::Post.new(uri.path)
request.set_form_data(params)
response = http.request(request)

p JSON.parse(response.body)</code></pre>
                        <div class="title">Example Response</div>
                        <pre><div><code style="border:none;box-shadow:none;" class="language-javascript always-visible">{"code":0,"checkoutPage":"https://pay.toss.im/payfront/auth?payToken=test_token1234567890&retUrl=http://YOUR-SITE.COM","payToken":"test_token1234567890"}
                        </code></div></pre>
                    </div>
                </div>
            </div>
            <div class="method" id="execute">
                <div class="method-section clearfix">
                    <div class="method-description">
                        <h3>결제 승인</h3>
                        <p>
                            구매자 인증 완료 상태(PAY_APPROVED)의 결제 건을 최종 승인하여 결제를 완료 처리합니다.
                            <br>
                            <br> 결제 승인에 관한 자세한 내용은 아래 문서를 참고하세요.
                            <br>
                            <a href="gettingstarted.html#execute">토스 결제 시작하기 > 결제 승인하기</a>
                        </p>
                        <div class="info">
                            <h4>endpoint</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    (POST)
                                </div>
                                <div class="desc">
                                  https://pay.toss.im/api/v1/execute</br>
                                  <p>(이전) https://toss.im/tosspay/api/v1/execute</p>
                                </div>
                            </div>
                        </div>
                        <div class="info">
                            <h4>parameters</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    apiKey
                                    <span class="type">String</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    가맹점 key
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    payToken
                                    <span class="type">String</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    Toss 결제 토큰 (승인할 결제 건의 토큰값)
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    amount
                                    <span class="type">Integer</span>
                                </div>
                                <div class="desc">
                                    결제 금액
                                    <br> (입력하는 경우, 구매자가 승인한 결제 금액과 이 값이 일치할 경우에만 승인 처리)
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    orderNo
                                    <span class="type">String</span>
                                </div>
                                <div class="desc">
                                    가맹점의 상품 주문번호
                                    <br> (입력하는 경우, 구매자가 승인한 주문번호와 이 값이 일치할 경우에만 승인 처리)
                                </div>
                            </div>
                        </div>
                        <div class="info">
                            <h4>response</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    code
                                </div>
                                <div class="desc">
                                    응답코드
                                    <br />
                                    <br />
                                    <table class="table">
                                        <tr>
                                            <td>0</td>
                                            <td>성공</td>
                                        </tr>
                                        <tr>
                                            <td>-1</td>
                                            <td>실패 (실패사유는 msg와 errorCode로 제공)</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    approvalTime
                                </div>
                                <div class="desc">
                                    승인시각 (yyyy-MM-dd HH:mm:ss)
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    amount
                                </div>
                                <div class="desc">
                                    승인한 결제 금액
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    orderNo
                                </div>
                                <div class="desc">
                                    승인한 상품 주문번호
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    msg
                                </div>
                                <div class="desc">
                                    응답이 성공이 아닌 경우 설명 메세지
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    errorCode
                                </div>
                                <div class="desc">
                                    에러 코드
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="method-example">
                        <div class="title">Definition</div>
                        <pre><code class="language-bash always-visible">POST https://pay.toss.im/api/v1/execute</code></pre>
                        <div class="title">Example Request</div>
                        <pre><code class="curl language-bash">curl "https://pay.toss.im/api/v1/execute" \
    -H "Content-Type: application/json" \
    -d '{
        "payToken":"test_token1234567890",
        "apiKey":"sk_test_apikey1234567890"
        }'</code><code class="java language-java">URL url = null;
URLConnection connection = null;
StringBuilder responseBody = new StringBuilder();
try {
	url = new URL("https://pay.toss.im/api/v1/execute");
	connection = url.openConnection();
	connection.addRequestProperty("Content-Type", "application/json");
	connection.setDoOutput(true);
	connection.setDoInput(true);
	
	org.json.simple.JSONObject jsonBody = new JSONObject();
	jsonBody.put("payToken", "test_token1234567890");
	jsonBody.put("apiKey", "sk_test_apikey1234567890");
	
	BufferedOutputStream bos = new BufferedOutputStream(connection.getOutputStream());
	bos.write(jsonBody.toJSONString().getBytes());
	bos.flush();
	bos.close();
	
	BufferedReader br = new BufferedReader(new InputStreamReader(connection.getInputStream()));
	String line = null;
	while ((line = br.readLine()) != null) {
		responseBody.append(line);
	}
	br.close();
} catch (Exception e) {
	responseBody.append(e);
}
System.out.println(responseBody.toString());</code><code class="php language-php">$arrayBody = array();
$arrayBody["payToken"] = "test_token1234567890";
$arrayBody["apiKey"] = "sk_test_apikey1234567890";
$jsonBody = json_encode($arrayBody);

$ch = curl_init('https://pay.toss.im/api/v1/execute');
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_POSTFIELDS, $jsonBody);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, array(
    'Content-Type: application/json',
    'Content-Length: ' . strlen($jsonBody))
);
 
$result = curl_exec($ch);
curl_close($ch);
   
echo "Response: ".$result;</code><code class="aspnet language-aspnet">Dim data, httpRequest, postResponse

data = "apiKey=sk_test_apikey1234567890"
data = data & "&payToken=test_token1234567890"

Set httpRequest = Server.CreateObject("MSXML2.ServerXMLHTTP")
httpRequest.Open "POST", "https://pay.toss.im/api/v1/execute", False
httpRequest.SetRequestHeader "Content-Type", "application/x-www-form-urlencoded"
httpRequest.Send data

postResponse = httpRequest.ResponseText

Response.Write postResponse</code><code class="python language-python">import urllib, urllib2

url = "https://pay.toss.im/api/v1/execute"
params = {
    "payToken": "test_token1234567890",
    "apiKey": "sk_test_apikey1234567890"
}

response = urllib.urlopen(url, urllib.urlencode(params))
print(response.read())</code><code class="ruby language-ruby">require 'net/http'
require 'json'

uri = URI.parse("https://pay.toss.im/api/v1/execute")

params = {
        "payToken" => "test_token1234567890",
        "apiKey" => "sk_test_apikey1234567890"
}

http = Net::HTTP.new(uri.host, uri.port)
http.use_ssl = true
request = Net::HTTP::Post.new(uri.path)
request.set_form_data(params)
response = http.request(request)

p JSON.parse(response.body)</code></pre>
                        <div class="title">Example Response</div>
                        <pre><code class="language-javascript always-visible">
{"code":0,"approvalTime":"2016-11-16 13:59:59"}</code>
            </pre>
                    </div>
                </div>
            </div>
            <div class="method" id="cancel">
                <div class="method-section clearfix">
                    <div class="method-description">
                        <h3>결제 취소</h3>
                        <p>
                            결제 대기 중인 결제 건을 취소합니다. (결제가 완료되어 구매자의 계좌에서 출금된 상태에서는 취소할 수 없으며 <a href="#refunds">환불</a> 처리해야 합니다)
                        </p>
                        <div class="info">
                            <h4>endpoint</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    (POST)
                                </div>
                                <div class="desc">
                                  https://pay.toss.im/api/v1/cancel </br>
                                  <p>(이전) https://toss.im/tosspay/api/v1/cancel</p>
                                </div>
                            </div>
                        </div>
                        <div class="info">
                            <h4>parameters</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    apiKey
                                    <span class="type">String</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    가맹점 key
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    payToken
                                    <span class="type">String</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    Toss 결제 토큰
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    reason
                                    <span class="type">String</span>
                                </div>
                                <div class="desc">
                                    취소 사유 (최대 50자)
                                </div>
                            </div>
                        </div>
                        <div class="info">
                            <h4>response</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    code
                                </div>
                                <div class="desc">
                                    응답코드
                                    <br />
                                    <br />
                                    <table class="table">
                                        <tr>
                                            <td>0</td>
                                            <td>성공</td>
                                        </tr>
                                        <tr>
                                            <td>-1</td>
                                            <td>실패 (실패사유는 msg와 errorCode로 제공)</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    msg
                                </div>
                                <div class="desc">
                                    응답이 성공이 아닌 경우 설명 메세지
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    errorCode
                                </div>
                                <div class="desc">
                                    에러 코드
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="method-example">
                        <div class="title">Definition</div>
                        <pre><code class="language-bash always-visible">POST https://pay.toss.im/api/v1/cancel</code></pre>
                        <div class="title">Example Request</div>
                        <pre><code class="curl language-bash">curl "https://pay.toss.im/api/v1/cancel" \
    -H "Content-Type: application/json" \
    -d '{
        "payToken":"test_token1234567890",
        "apiKey":"sk_test_apikey1234567890"
        }'</code><code class="java language-java">URL url = null;
URLConnection connection = null;
StringBuilder responseBody = new StringBuilder();
try {
	url = new URL("https://pay.toss.im/api/v1/cancel");
	connection = url.openConnection();
	connection.addRequestProperty("Content-Type", "application/json");
	connection.setDoOutput(true);
	connection.setDoInput(true);
	
	org.json.simple.JSONObject jsonBody = new JSONObject();
	jsonBody.put("payToken", "test_token1234567890");
	jsonBody.put("reason", "재고 부족");
	jsonBody.put("apiKey", "sk_test_apikey1234567890");
	
	BufferedOutputStream bos = new BufferedOutputStream(connection.getOutputStream());
	bos.write(jsonBody.toJSONString().getBytes());
	bos.flush();
	bos.close();
	
	BufferedReader br = new BufferedReader(new InputStreamReader(connection.getInputStream()));
	String line = null;
	while ((line = br.readLine()) != null) {
		responseBody.append(line);
	}
	br.close();
} catch (Exception e) {
	responseBody.append(e);
}
System.out.println(responseBody.toString());</code><code class="php language-php">$arrayBody = array();
$arrayBody["payToken"] = "test_token1234567890";
$arrayBody["reason"] = "재고 부족";
$arrayBody["apiKey"] = "sk_test_apikey1234567890";
$jsonBody = json_encode($arrayBody);

$ch = curl_init('https://pay.toss.im/api/v1/cancel');
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_POSTFIELDS, $jsonBody);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, array(
    'Content-Type: application/json',
    'Content-Length: ' . strlen($jsonBody))
);
 
$result = curl_exec($ch);
curl_close($ch);
      
echo "Response: ".$result;</code><code class="aspnet language-aspnet">Dim data, httpRequest, postResponse
​
data = "apiKey=sk_test_apikey1234567890"
data = data & "&payToken=test_token1234567890"
data = data & "&reason=SoldOut"
​
Set httpRequest = Server.CreateObject("MSXML2.ServerXMLHTTP")
httpRequest.Open "POST", "https://pay.toss.im/api/v1/cancel", False
httpRequest.SetRequestHeader "Content-Type", "application/x-www-form-urlencoded"
httpRequest.Send data
​
postResponse = httpRequest.ResponseText
​
Response.Write postResponse
</code><code class="python language-python">import urllib, urllib2

url = "https://pay.toss.im/api/v1/cancel"
params = {
    "payToken": "test_token1234567890",
    "reason":"재고 부족",
    "apiKey": "sk_test_apikey1234567890"
}

response = urllib.urlopen(url, urllib.urlencode(params))
print(response.read())</code><code class="ruby language-ruby">require 'net/http'
require 'json'

uri = URI.parse("https://pay.toss.im/api/v1/cancel")

params = {
        "payToken" => "test_token1234567890",
        "reason" => "재고 부족",
        "apiKey" => "sk_test_apikey1234567890"
}

http = Net::HTTP.new(uri.host, uri.port)
http.use_ssl = true
request = Net::HTTP::Post.new(uri.path)
request.set_form_data(params)
response = http.request(request)

p JSON.parse(response.body)</code></pre>
                        <div class="title">Example Response</div>
                        <pre><code class="language-javascript always-visible">{"code":0}</code>
            </pre>
                    </div>

                </div>
            </div>
            <div class="method" id="refunds">
                <div class="method-section clearfix">
                    <div class="method-description">
                        <h3>결제 환불</h3>
                        <p>
                            결제 완료 건의 결제 금액 중 일부 또는 전부를 구매자에게 돌려줍니다.
                        </p>
                        <div class="info">
                            <h4>endpoint</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    (POST)
                                </div>
                                <div class="desc">
                                  https://pay.toss.im/api/v1/refunds </br>
                                  <p>(이전) https://toss.im/tosspay/api/v1/refunds</p>
                                </div>
                            </div>
                        </div>
                        <div class="info">
                            <h4>parameters</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    apiKey
                                    <span class="type">String</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    가맹점 key
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    payToken
                                    <span class="type">String</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    Toss 결제 토큰
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    refundNo
                                    <span class="type">String</span>
                                </div>
                                <div class="desc">
                                    환불 번호
                                    <br />
                                    <span class="text-muted">환불 상태 확인 시 필요. 미입력 시 자동 생성되며 환불 완료 응답에서 확인 가능</span>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    reason
                                    <span class="type">String</span>
                                </div>
                                <div class="desc">
                                    환불 사유 (최대 50자)
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    amount
                                    <span class="type">Integer</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    환불할 금액
                                    <br />
                                    <span class="text-muted">미입력시 환불할 결제건의 남은 전액을 환불 처리</span>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    amountTaxable
                                    <span class="type">Integer</span>
                                </div>
                                <div class="desc">
                                    환불할 금액 중 과세금액
                                    <br />
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    amountTaxFree
                                    <span class="type">Integer</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    환불할 금액 중 비과세금액
                                    <br />
                                    <span class="text-muted">환불할 금액중 비과세 금액, 없으면 0으로 설정</span>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    amountVat
                                    <span class="type">Integer</span>
                                </div>
                                <div class="desc">
                                    환불할 금액 중 부가세
                                    <br />
                                    <span class="text-muted">값이 없으면 환불할 과세금액을 11로 나눈 후 소수점 첫째 자리에서 올림</span>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    amountServiceFee
                                    <span class="type">Integer</span>
                                </div>
                                <div class="desc">
                                    환불할 금액 중 봉사료
                                    <br />
                                    <span class="text-muted">결제 생성 시 봉사료 설정한 경우에만 입력 가능</span>
                                </div>
                            </div>
                        </div>
                        <div class="info">
                            <h4>response</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    code
                                </div>
                                <div class="desc">
                                    응답코드
                                    <br />
                                    <br />
                                    <table class="table">
                                        <tr>
                                            <td>0</td>
                                            <td>성공</td>
                                        </tr>
                                        <tr>
                                            <td>-1</td>
                                            <td>실패 (실패사유는 msg와 errorCode로 제공)</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    refundNo
                                </div>
                                <div class="desc">
                                    환불 번호
                                    <br />
                                    <span class="text-muted">환불 상태 확인 시 필요</span>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    approvalTime
                                </div>
                                <div class="desc">
                                    승인시각 (yyyy-MM-dd HH:mm:ss)
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    msg
                                </div>
                                <div class="desc">
                                    응답이 성공이 아닌 경우 설명 메세지
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    errorCode
                                </div>
                                <div class="desc">
                                    에러 코드
                                    <br />
                                    <br />
                                    <table class="table">
                                        <tr>
                                            <td>COMMON_REFUND_ERROR</td>
                                            <td>이미 환불된 결제입니다.</td>
                                        </tr>
                                        <tr>
                                            <td>REFUND_EXCEED_AMOUNT</td>
                                            <td>환불금액이 결제금액보다 더 클수 없습니다.</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="method-example">
                        <div class="title">Definition</div>
                        <pre><code class="language-bash always-visible">POST https://pay.toss.im/api/v1/refunds</code></pre>
                        <div class="title">Example Request</div>
                        <pre><code class="curl language-bash">curl "https://pay.toss.im/api/v1/refunds" \
    -H "Content-Type: application/json" \
    -d '{
        "payToken":"test_token1234567890",
        "apiKey":"sk_test_apikey1234567890"
        }'</code><code class="java language-java">URL url = null;
URLConnection connection = null;
StringBuilder responseBody = new StringBuilder();
try {
	url = new URL("https://pay.toss.im/api/v1/refunds");
	connection = url.openConnection();
	connection.addRequestProperty("Content-Type", "application/json");
	connection.setDoOutput(true);
	connection.setDoInput(true);
	
	org.json.simple.JSONObject jsonBody = new JSONObject();
	jsonBody.put("payToken", "test_token1234567890");
	jsonBody.put("amount", "5000");
	jsonBody.put("apiKey", "sk_test_apikey1234567890");
	
	BufferedOutputStream bos = new BufferedOutputStream(connection.getOutputStream());
	bos.write(jsonBody.toJSONString().getBytes());
	bos.flush();
	bos.close();
	
	BufferedReader br = new BufferedReader(new InputStreamReader(connection.getInputStream()));
	String line = null;
	while ((line = br.readLine()) != null) {
		responseBody.append(line);
	}
	br.close();
} catch (Exception e) {
	responseBody.append(e);
}
System.out.println(responseBody.toString());</code><code class="php language-php">$arrayBody = array();
$arrayBody["payToken"] = "test_token1234567890";
$arrayBody["amount"] = 5000;
$arrayBody["apiKey"] = "sk_test_apikey1234567890";
$jsonBody = json_encode($arrayBody);

$ch = curl_init('https://pay.toss.im/api/v1/refunds');
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_POSTFIELDS, $jsonBody);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, array(
    'Content-Type: application/json',
    'Content-Length: ' . strlen($jsonBody))
);
 
$result = curl_exec($ch);
curl_close($ch);
   
echo "Response: ".$result;</code><code class="aspnet language-aspnet">Dim data, httpRequest, postResponse

data = "apiKey=sk_test_apikey1234567890"
data = data & "&payToken=test_token1234567890"
data = data & "&amount=1000"

Set httpRequest = Server.CreateObject("MSXML2.ServerXMLHTTP")
httpRequest.Open "POST", "https://pay.toss.im/api/v1/refunds", False
httpRequest.SetRequestHeader "Content-Type", "application/x-www-form-urlencoded"
httpRequest.Send data

postResponse = httpRequest.ResponseText

Response.Write postResponse</code><code class="python language-python">import urllib, urllib2

url = "https://pay.toss.im/api/v1/refunds"
params = {
    "payToken": "test_token1234567890",
    "amount": 5000,
    "apiKey": "sk_test_apikey1234567890"
}

response = urllib.urlopen(url, urllib.urlencode(params))
print(response.read())</code><code class="ruby language-ruby">require 'net/http'
require 'json'

uri = URI.parse("https://pay.toss.im/api/v1/refunds")

params = {
        "payToken" => "test_token1234567890",
        "amount"=> 5000,
        "apiKey" => "sk_test_apikey1234567890"
}

http = Net::HTTP.new(uri.host, uri.port)
http.use_ssl = true
request = Net::HTTP::Post.new(uri.path)
request.set_form_data(params)
response = http.request(request)

p JSON.parse(response.body)</code></pre>
                        <div class="title">Example Response</div>
                        <pre><code class="language-javascript always-visible">{"code":0,"refundNo":"cc92a9ef-8a81-2938-dda9-ff8a78ae29b8","approvalTime":"2016-11-16 13:59:59"}</code>
            </pre>
                    </div>
                </div>
            </div>
            <div class="method" id="status">
                <div class="method-section clearfix">
                    <div class="method-description">
                        <h3>결제 상태 확인</h3>
                        <p>
                            생성된 결제의 현재 상태를 조회합니다.
                        </p>
                        <div class="info">
                            <h4>endpoint</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    (POST)
                                </div>
                                <div class="desc">
                                  https://pay.toss.im/api/v1/status </br>
                                  <p>(이전) https://toss.im/tosspay/api/v1/status</p>
                                </div>
                            </div>
                        </div>
                        <div class="info">
                            <h4>parameters</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    apiKey
                                    <span class="type">String</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    가맹점 key
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    payToken 또는 orderNo
                                    <span class="type">String</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    Toss 결제 토큰 또는 가맹점 주문번호 (payToken의 우선순위 높음)
                                </div>
                            </div>
                        </div>
                        <div class="info">
                            <h4>response</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    code
                                </div>
                                <div class="desc">
                                    응답코드
                                    <br />
                                    <br />
                                    <table class="table">
                                        <tr>
                                            <td>0</td>
                                            <td>성공</td>
                                        </tr>
                                        <tr>
                                            <td>-1</td>
                                            <td>실패 (실패사유는 msg와 errorCode로 제공)</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    payToken
                                    <span class="type">String</span>
                                </div>
                                <div class="desc">
                                    Toss 결제 토큰
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    payStatus
                                    <span class="type">String</span>
                                </div>
                                <div class="desc">
                                    결제 상태
                                    <br />
                                    <br />
                                    <table class="table">
                                        <tr>
                                            <td>PAY_STANDBY</td>
                                            <td>결제 대기 중</td>
                                        </tr>
                                        <tr>
                                            <td>PAY_APPROVED</td>
                                            <td>구매자 인증 완료</td>
                                        </tr>
                                        <tr>
                                            <td>PAY_CANCEL</td>
                                            <td>결제 취소</td>
                                        </tr>
                                        <tr>
                                            <td>PAY_PROGRESS</td>
                                            <td>결제 진행 중</td>
                                        </tr>
                                        <tr>
                                            <td>PAY_COMPLETE</td>
                                            <td>결제 완료</td>
                                        </tr>
                                        <tr>
                                            <td>ESCROW_REQUEST</td>
                                            <td>배송등록 대기 중</td>
                                        </tr>
                                        <tr>
                                            <td>ESCROW_RELEASE</td>
                                            <td>구매확정 대기 중</td>
                                        </tr>
                                        <tr>
                                            <td>ESCROW_DENY</td>
                                            <td>구매자 지급 거부</td>
                                        </tr>
                                        <tr>
                                            <td>REFUND_PROGRESS</td>
                                            <td>환불 진행 중</td>
                                        </tr>
                                        <tr>
                                            <td>REFUND_SUCCESS</td>
                                            <td>환불 성공</td>
                                        </tr>
                                        <tr>
                                            <td>SETTLEMENT_COMPLETE</td>
                                            <td>정산 완료</td>
                                        </tr>
                                        <tr>
                                            <td>SETTLEMENT_REFUND_COMPLETE</td>
                                            <td>환불 정산 완료</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    orderNo
                                    <span class="type">String</span>
                                </div>
                                <div class="desc">
                                    Toss 결제와 이어진 주문번호
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    amount
                                    <span class="type">Integer</span>
                                </div>
                                <div class="desc">
                                    결제 금액
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    amountTaxable
                                    <span class="type">Integer</span>
                                </div>
                                <div class="desc">
                                    결제 금액 중 과세금액 (복합과세)
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    amountTaxFree
                                    <span class="type">Integer</span>
                                </div>
                                <div class="desc">
                                    결제 금액 중 비과세금액 (복합과세)
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    amountVat
                                    <span class="type">Integer</span>
                                </div>
                                <div class="desc">
                                    결제 금액 중 부가세 (복합과세)
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    amountServiceFee
                                    <span class="type">Integer</span>
                                </div>
                                <div class="desc">
                                    결제 금액 중 봉사료 (복합과세)
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    timeCreated
                                    <span class="type">timestamp</span>
                                </div>
                                <div class="desc">
                                    결제 생성 시각
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    timePayComplete
                                    <span class="type">timestamp</span>
                                </div>
                                <div class="desc">
                                    결제 완료 시각
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    timePayCancel
                                    <span class="type">timestamp</span>
                                </div>
                                <div class="desc">
                                    결제 취소 시각
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    productDesc
                                    <span class="type">String</span>
                                </div>
                                <div class="desc">
                                    상품 설명
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    hasOwner
                                    <span class="type">boolean</span>
                                </div>
                                <div class="desc">
                                    구매자의 결제 정보 입력 여부
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    availableActions
                                    <span class="type">List</span>
                                </div>
                                <div class="desc">
                                    가능한 액션 목록
                                    <br />
                                    <br />
                                    <table class="table">
                                        <tr>
                                            <td>CANCEL</td>
                                            <td>결제 취소</td>
                                        </tr>
                                        <tr>
                                            <td>REFUND</td>
                                            <td>결제 환불</td>
                                        </tr>
                                        <tr>
                                            <td>ESCROW</td>
                                            <td>에스크로 (배송등록/구매확정재요청)</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    refunds
                                    <span class="type">list</span>
                                </div>
                                <div class="desc">
                                    조회한 결제건에 대한 환불 요청 및 결과
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    timeRefundSuccess
                                    <span class="type">timestamp</span>
                                </div>
                                <div class="desc">
                                    환불 완료 시각
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    metadata
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    결제와 연관된 추가 데이터
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    msg
                                </div>
                                <div class="desc">
                                    응답이 성공이 아닌 경우 설명 메세지
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    errorCode
                                </div>
                                <div class="desc">
                                    에러 코드
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="method-example">
                        <div class="title">Definition</div>
                        <pre><code class="language-bash always-visible">POST https://pay.toss.im/api/v1/status</code></pre>
                        <div class="title">Example Request</div>
                        <pre><code class="curl language-bash">curl "https://pay.toss.im/api/v1/status" \
    -H "Content-Type: application/json" \
    -d '{
        "payToken":"test_token1234567890",
        "apiKey":"sk_test_apikey1234567890"
        }'</code><code class="java language-java">URL url = null;
URLConnection connection = null;
StringBuilder responseBody = new StringBuilder();
try {
	url = new URL("https://pay.toss.im/api/v1/status");
	connection = url.openConnection();
	connection.addRequestProperty("Content-Type", "application/json");
	connection.setDoOutput(true);
	connection.setDoInput(true);
	
	org.json.simple.JSONObject jsonBody = new JSONObject();
	jsonBody.put("orderNo", "2015072012211");
	jsonBody.put("apiKey", "sk_test_apikey1234567890");
	
	BufferedOutputStream bos = new BufferedOutputStream(connection.getOutputStream());
	bos.write(jsonBody.toJSONString().getBytes());
	bos.flush();
	bos.close();
	
	BufferedReader br = new BufferedReader(new InputStreamReader(connection.getInputStream()));
	String line = null;
	while ((line = br.readLine()) != null) {
		responseBody.append(line);
	}
	br.close();
} catch (Exception e) {
	responseBody.append(e);
}
System.out.println(responseBody.toString());</code><code class="php language-php">$arrayBody = array();
$arrayBody["orderNo"] = "2015072012211";
$arrayBody["apiKey"] = "sk_test_apikey1234567890";
$jsonBody = json_encode($arrayBody);
// echo "Request: ".$request."<br>";
$ch = curl_init('https://pay.toss.im/api/v1/status');
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_POSTFIELDS, $jsonBody);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, array(
    'Content-Type: application/json',
    'Content-Length: ' . strlen($jsonBody))
);
 
$result = curl_exec($ch);
curl_close($ch);
      
echo "Response: ".$result;</code><code class="aspnet language-aspnet">Dim data, httpRequest, postResponse

data = "apiKey=sk_test_apikey1234567890"
data = data & "&orderNo=2015072012211"

Set httpRequest = Server.CreateObject("MSXML2.ServerXMLHTTP")
httpRequest.Open "POST", "https://pay.toss.im/api/v1/status", False
httpRequest.SetRequestHeader "Content-Type", "application/x-www-form-urlencoded"
httpRequest.Send data

postResponse = httpRequest.ResponseText

Response.Write postResponse</code><code class="python language-python">import urllib, urllib2

url = "https://pay.toss.im/api/v1/status"
params = {
    "orderNo": "2015072012211",
    "apiKey": "sk_test_apikey1234567890"
}

response = urllib.urlopen(url, urllib.urlencode(params))
print(response.read())</code><code class="ruby language-ruby">require 'net/http'
require 'json'

uri = URI.parse("https://pay.toss.im/api/v1/status")

params = {
        "orderNo" => "2015072012211",
        "apiKey" => "sk_test_apikey1234567890"
}

http = Net::HTTP.new(uri.host, uri.port)
http.use_ssl = true
request = Net::HTTP::Post.new(uri.path)
request.set_form_data(params)
response = http.request(request)

p JSON.parse(response.body)</code></pre>
                        <div class="title">Example Response</div>
                        <pre><code class="language-javascript always-visible">{
    "payToken": "test_token1234567890",
    "payStatus": "REFUND_SUCCESS",
    "orderNo": "2015072012211",
    "amount":11000,
    "amountTaxable":10000,
    "amountTaxFree":0,
    "amountVat":1000,
    "amountServiceFee":0,
    "timeCreated":"2017-02-15 11:59:48",
	"timePayComplete":"2017-02-15 12:01:19",
	"timePayCancel":"",
    "productDesc":"테스트 상품",
    "hasOwner": true,
    "availableActions": [
    "REFUND"
    ],
    "refunds": [
        {
        "reason": "일부 상품 환불",
        "amount": 100,
        "refundNo": "7161b8e3-4b79-49d7-ab3c-3ae898aa073b",
        "timeRefundSuccess": "2017-02-15 16:12:40",
        "status": "SUCCESS"
        },
        {
        "reason": "일부 상품 환불",
        "amount": 200,
        "refundNo": "a636fe94-4e1e-41c8-90d9-b17180bdaf04",
        "timeRefundSuccess": "2017-02-15 16:12:43",
        "status": "SUCCESS"
        },
        {
        "reason": "일부 상품 환불",
        "amount": 500,
        "refundNo": "cc92a9ef-8a81-2938-dda9-ff8a78ae29b8",
        "timeRefundSuccess": "2017-02-15 16:12:46",
        "status": "SUCCESS"
        }
    ],
    "code": 0,
    "status": 200,
    "metadata": "metadata"
}</code>
            </pre>
                    </div>
                </div>
            </div>
            <div class="method" id="refundStatus">
                <div class="method-section clearfix">
                    <div class="method-description">
                        <h3>환불 상태 확인</h3>
                        <p>
                            요청하신 환불 건의 현재 상태를 조회합니다. (요청 건별 조회)
                        </p>
                        <div class="info">
                            <h4>endpoint</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    (GET)
                                </div>
                                <div class="desc">
                                  https://pay.toss.im/api/v1/refunds/{refundNo} </br>
                                  <p>(이전) https://toss.im/tosspay/api/v1/refunds/{refundNo}</p>
                                </div>
                            </div>
                        </div>
                        <div class="info">
                            <h4>parameters</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    apiKey
                                    <span class="type">String</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    가맹점 key
                                </div>
                            </div>
                        </div>
                        <div class="info">
                            <h4>response</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    code
                                    <span class="type">Integer</span>
                                </div>
                                <div class="desc">
                                    응답코드
                                    <br />
                                    <br />
                                    <table class="table">
                                        <tr>
                                            <td>0</td>
                                            <td>성공</td>
                                        </tr>
                                        <tr>
                                            <td>-1</td>
                                            <td>실패 (실패사유는 msg와 errorCode로 제공)</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    refund
                                    <span class="type">list</span>
                                </div>
                                <div class="desc">
                                    환불 번호와 금액, 상태, 사유
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    msg
                                </div>
                                <div class="desc">
                                    응답이 성공이 아닌 경우 설명 메세지
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    errorCode
                                </div>
                                <div class="desc">
                                    에러 코드
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="method-example">
                        <div class="title">Definition</div>
                        <pre><code class="language-bash always-visible">GET https://pay.toss.im/api/v1/refunds/{refundNo}</code></pre>
                        <div class="title">Example Request</div>
                        <pre><code class="curl language-bash">curl -X GET \
  'https://pay.toss.im/api/v1/refunds/f0fe4083-fe1b-44e5-ba04-4390bc19bc5e?apiKey=sk_test_apikey1234567890' \
  -H 'content-type: application/json'</code><code class="java language-java">OkHttpClient client = new OkHttpClient();

MediaType mediaType = MediaType.parse("application/json");
RequestBody body = RequestBody.create(mediaType, "{\n    \"apiKey\":\"sk_test_LY5kmjV2l7LY5kmjV2l7\"\n}");
Request request = new Request.Builder()
  .url("https://pay.toss.im/api/v1/refunds/f0fe4083-fe1b-44e5-ba04-4390bc19bc5e?apiKey=sk_test_apikey1234567890")
  .get()
  .addHeader("content-type", "application/json")
  .build();

Response response = client.newCall(request).execute();</code><code class="php language-php">$request = new HttpRequest();
$request->setUrl('https://pay.toss.im/api/v1/refunds/f0fe4083-fe1b-44e5-ba04-4390bc19bc5e');
$request->setMethod(HTTP_METH_GET);

$request->setQueryData(array(
  'apiKey' => 'sk_test_apikey1234567890'
));

$request->setHeaders(array(
  'content-type' => 'application/json'
));

$request->setBody('{
    "apiKey":"sk_test_LY5kmjV2l7LY5kmjV2l7"
}');

try {
  $response = $request->send();

  echo $response->getBody();
} catch (HttpException $ex) {
  echo $ex;
}</code><code class="aspnet language-aspnet"></code><code class="python language-python">import http.client

conn = http.client.HTTPSConnection("tpay.oss.im")

payload = "{\n    \"apiKey\":\"sk_test_LY5kmjV2l7LY5kmjV2l7\"\n}"

headers = {
    'content-type': "application/json"
    }

conn.request("GET", "/tosspay/api/v1/refunds/f0fe4083-fe1b-44e5-ba04-4390bc19bc5e?apiKey=sk_test_apikey1234567890", payload, headers)

res = conn.getresponse()
data = res.read()

print(data.decode("utf-8"))</code><code class="ruby language-ruby">require 'uri'
require 'net/http'

url = URI("https://pay.toss.im/api/v1/refunds/f0fe4083-fe1b-44e5-ba04-4390bc19bc5e?apiKey=sk_test_apikey1234567890")

http = Net::HTTP.new(url.host, url.port)
http.use_ssl = true
http.verify_mode = OpenSSL::SSL::VERIFY_NONE

request = Net::HTTP::Get.new(url)
request["content-type"] = 'application/json'
request.body = "{\n    \"apiKey\":\"sk_test_LY5kmjV2l7LY5kmjV2l7\"\n}"

response = http.request(request)
puts response.read_body</code></pre>
                        <div class="title">Example Response</div>
                        <pre><code class="language-javascript always-visible">{
    "code": 0,
    "refund": {
        "refundNo": "7161b8e3-4b79-49d7-ab3c-3ae898aa073b",
        "status": "SUCCESS",
        "amount": 100,
        "reason": "부분 환불 테스트"
    }
}</code>
            </pre>
                    </div>
                </div>
            </div>
            <div class="method" id="escrow">
                <div class="method-section clearfix">
                    <div class="method-description">
                        <h3>에스크로 결제 진행</h3>
                        <p>
                            에스크로 결제를 완료하고 대금을 정산받기 위해서는 '배송 등록'이 필요합니다. 또, 구매자가 대금 지급을 거부하여 결제가 '구매자 지급 거부' 상태가 된 경우, '구매확정 재요청'을 통해 거부 상태를 해제할 수 있습니다.
                        </p>
                        <p>
                            본 API를 통해 '배송 등록'과 '구매확정 재요청'을 처리할 수 있습니다.
                            <br>
                            <br> - '배송등록 대기 중' 상태에서 호출 시 : '배송 등록' 됨
                            <br> - 구매자 지급 거부 상태에서 호출 시 : '구매확정 재요청' 됨
                        </p>
                        <p>더 자세한 내용은 <a href="gettingstarted.html#escrow">'토스 결제 시작하기 > 에스크로 결제 진행'</a> 문서를 참고하세요.</p>
                        <div class="info">
                            <h4>endpoint</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    (POST)
                                </div>
                                <div class="desc">
                                  https://pay.toss.im/api/v1/escrow </br>
                                  <p>(이전) https://toss.im/tosspay/api/v1/escrow</p>
                                </div>
                            </div>
                        </div>
                        <div class="info">
                            <h4>parameters</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    apiKey
                                    <span class="type">String</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    가맹점 key
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    payToken
                                    <span class="type">String</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    Toss 결제 토큰
                                </div>
                            </div>
                        </div>
                        <div class="info">
                            <h4>response</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    code
                                </div>
                                <div class="desc">
                                    응답코드
                                    <br />
                                    <br />
                                    <table class="table">
                                        <tr>
                                            <td>0</td>
                                            <td>성공</td>
                                        </tr>
                                        <tr>
                                            <td>-1</td>
                                            <td>실패 (실패사유는 msg와 errorCode로 제공)</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    msg
                                </div>
                                <div class="desc">
                                    응답이 성공이 아닌 경우 설명 메세지
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    errorCode
                                </div>
                                <div class="desc">
                                    에러 코드
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="method-example">
                        <div class="title">Definition</div>
                        <pre><code class="language-bash always-visible">POST https://pay.toss.im/api/v1/escrow</code></pre>
                        <div class="title">Example Request</div>
                        <pre><code class="curl language-bash">curl "https://pay.toss.im/api/v1/escrow" \
    -H "Content-Type: application/json" \
    -d '{
    "payToken":"test_token1234567890",
    "apiKey":"sk_test_apikey1234567890"
    }'</code><code class="java language-java">URL url = null;
    URLConnection connection = null;
    StringBuilder responseBody = new StringBuilder();
    try {
    url = new URL("https://pay.toss.im/api/v1/escrow");
    connection = url.openConnection();
    connection.addRequestProperty("Content-Type", "application/json");
    connection.setDoOutput(true);
    connection.setDoInput(true);

    org.json.simple.JSONObject jsonBody = new JSONObject();
    jsonBody.put("payToken", "test_token1234567890");
    jsonBody.put("apiKey", "sk_test_apikey1234567890");

    BufferedOutputStream bos = new BufferedOutputStream(connection.getOutputStream());
    bos.write(jsonBody.toJSONString().getBytes());
    bos.flush();
    bos.close();

    BufferedReader br = new BufferedReader(new InputStreamReader(connection.getInputStream()));
    String line = null;
    while ((line = br.readLine()) != null) {
    responseBody.append(line);
    }
    br.close();
    } catch (Exception e) {
    responseBody.append(e);
    }
    System.out.println(responseBody.toString());</code><code class="php language-php">$arrayBody = array();
    $arrayBody["payToken"] = "test_token1234567890";
    $arrayBody["apiKey"] = "sk_test_apikey1234567890";
    $jsonBody = json_encode($arrayBody);

    $ch = curl_init('https://pay.toss.im/api/v1/escrow');
    curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $jsonBody);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array(
    'Content-Type: application/json',
    'Content-Length: ' . strlen($jsonBody))
    );

    $result = curl_exec($ch);
    curl_close($ch);

    echo "Response: ".$result;</code></pre>
                        <div class="title">Example Response</div>
                        <pre><code class="language-javascript always-visible">{"code":0}</code>
                        </pre>
                    </div>

                </div>
            </div>
        </div>
    </div>


    <script type="text/javascript">
        $(function () {

            // language toggle
            var $languages = $(".languages .language");
            $languages.click(function (e) {
                e.preventDefault();
                var lang = $(this).data("lang");
                $languages.removeClass("selected");
                $(this).addClass("selected");

                $("pre code").hide();
                $("pre code." + lang).css("display", "block");
            });
            $("pre code." + $(".language.selected").data("lang")).css("display", "block");
        });
    </script>
    <script src="js/prism.js"></script>
</body>

</html>
