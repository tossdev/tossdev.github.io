 <!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>토스 자동결제 연동 가이드</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="https://static.toss.im/tds/favicon/favicon.ico"/>
<link rel="icon" type="image/png" sizes="16x16" href="https://static.toss.im/tds/favicon/favicon-16x16.png"/>
<link rel="icon" type="image/png" sizes="32x32" href="https://static.toss.im/tds/favicon/favicon-32x32.png"/>
<link rel="icon" type="image/png" sizes="48x48" href="https://static.toss.im/tds/favicon/favicon-48x48.png"/>
<link rel="icon" type="image/png" sizes="196x196" href="https://static.toss.im/tds/favicon/favicon-196x196.png"/>
<link rel="apple-touch-icon" sizes="57x57" href="https://static.toss.im/tds/favicon/apple-touch-icon-57x57.png"/>
<link rel="apple-touch-icon" sizes="72x72" href="https://static.toss.im/tds/favicon/apple-touch-icon-72x72.png"/>
<link rel="apple-touch-icon" sizes="114x114" href="https://static.toss.im/tds/favicon/apple-touch-icon-114x114.png"/>
<link rel="apple-touch-icon" sizes="120x120" href="https://static.toss.im/tds/favicon/apple-touch-icon-120x120.png"/>
<link rel="apple-touch-icon" sizes="144x144" href="https://static.toss.im/tds/favicon/apple-touch-icon-144x144.png"/>
<link rel="apple-touch-icon" sizes="152x152" href="https://static.toss.im/tds/favicon/apple-touch-icon-152x152.png"/>
<meta name="msapplication-TileImage" content="https://static.toss.im/tds/favicon/mstile-144x144.png"/>

    <!-- stylesheets -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" integrity="sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://static.toss.im/tds/current/css/tds.min.css">
    <link rel="stylesheet" type="text/css" href="css/prism.css" />
    <link rel="stylesheet" type="text/css" href="css/tossdev.css" />

    <!-- javascript -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js" integrity="sha512-K1qjQ+NcF2TYO/eI3M6v8EiNYZfA95pQumfvcVrTHtwQVDG+aHRqLi/ETn2uB+1JqwYqVG3LIvdm9lj6imS/pQ==" crossorigin="anonymous"></script>
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>

<body id="docs" data-spy="scroll" data-target="#guide" oncontextmenu="return false" ondragstart="return false" >

    <!-- Google Tag Manager -->
    <noscript>
        <iframe src="//www.googletagmanager.com/ns.html?id=GTM-TPTMLG" height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>
    <script>
        (function (w, d, s, l, i) {
            w[l] = w[l] || [];
            w[l].push({
                'gtm.start': new Date().getTime(),
                event: 'gtm.js'
            });
            var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s),
                dl = l != 'dataLayer' ? '&l=' + l : '';
            j.async = true;
            j.src =
                '//www.googletagmanager.com/gtm.js?id=' + i + dl;
            f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-TPTMLG');
    </script>
    <!-- End Google Tag Manager -->
    <div id="guide">
      <div class="logo">
        <a href="index.html">
          <img class="logo-img" src="https://static.toss.im/tds/icon/svg/logo-only-icon.svg" alt="">
          <span>결제 연동 가이드</span>
        </a>
      </div>
        <ul class="menu nav">
            <h5>자동결제 API</h5>
            <li>
                <a href="#intro">개요</a>
            </li>
            <li>
                <a href="#flow">자동결제 flow</a>
            </li>
            <h5>API 목록</h5>
            <li>
                <a href="#billing-key">빌링키 생성 요청</a>
            </li>
            <li>
                <a href="#resultcallback">빌링키 처리결과 callback</a>
            </li>
            <li>
                <a href="#bill">자동결제(bill) 승인 요청</a>
            </li>
            <li>
                <a href="#refunds">자동결제(bill) 환불 요청</a>
            </li>
            <li>
                <a href="#status">결제 상태조회</a>
            </li>
             <li>
                <a href="#billing-key/status">빌링키 상태조회</a>
            </li>
             <li>
                <a href="#remove">빌링키 삭제</a>
            </li>
             <li>
                <a href="#list">토스 은행 코드 리스트</a>
            </li>
              <li>
                <a href="#errorcode">결제 에러코드</a>
            </li>
        </ul>
    </div>

    <div id="api-docs">
        <div id="methods">
            <div class="languages">
                <a class="language selected" data-lang="curl" href="#">curl</a>
                <a class="language" data-lang="java" href="#">Java</a>
                <a class="language" data-lang="php" href="#">PHP</a>
                <a class="language" data-lang="python" href="#">Python</a>
                <a class="language" data-lang="ruby" href="#">Ruby</a>
                <a class="language" data-lang="aspnet" href="#">ASP</a>
            </div>
           <div class="method" id="intro">
                <div class="method-section clearfix">
                    <div class="method-description">
                        <h3>개요</h3>
                        <p>빌링키 방식으로 자동결제를 연동할 수 있도록 신규 API를 구현하였습니다.<br>
                        토스 결제서버는 가맹점의 빌링키 생성요청에 따라 구매자가 인증할 수 있는 유니크한 '결제 인증 URL'을 생성하고, 가맹점을 통해 구매자는 토스 앱을 통해 인증을 진행할 수 있습니다.<br>
                        사용자의 유니크한 빌링키가 생성되며, 가맹점은 이 빌링키를 관리하고 필요 시 결제 승인 요청을 할 수 있습니다.<br>
                        토스가 제공하는 자동결제는 '토스머니'와 '카드' 결제수단을 제공합니다. 해당 문서는 자동결제 각 API의 기능을 설명합니다.<br>
                        테스트 계정 및 별도의 SDK 파일을 제공하지 않기에, '토스' 앱 설치 후 최신 버전 사용을 권장합니다. 결제 도메인은 운영환경으로 제공되며, 결제에서 사용하는 상점 apiKey 속성에 따라 실제 출금 여부를 판단합니다.<br>
                        테스트 키(sk_test_xxx...)는 실제 출금되지 않으니 충분히 테스트할 수 있습니다.<br>
                        양사 간 계약이 완료된 후 전용 상점정보를 전달하며, 그 전까지는 가이드에 기재된 테스트 apiKey로 진행할 수 있습니다. 라이브 apiKey는 별도 요청 시 제공됩니다.<br>
                        각 API의 응답 필드 및 에러코드는 사전 예고 없이 추가될 수 있으니 추가되더라도 오류가 발생하지 않도록 주의가 필요합니다.<br>
                        <strong>토스페이 개발 가이드는 수시로 업데이트 됩니다. 사전 예고없이 업데이트 될 수 있으니 지속적으로 확인해 주시길 부탁드립니다.</strong></p>
                     </div>
                </div>
            </div>
                <div class="method" id="flow">
                <div class="method-section clearfix">
                    <div class="method-description">
                        <h3>자동결제 flow</h3>
                        <p>
                         <img src="../images/flow.png" alt="자동결제 flow" />
                         </p>
                       </div>
                </div>
            </div>
             <div class="method" id="billing-key">
                <div class="method-section clearfix">
                    <div class="method-description">
                        <h3>빌링키 생성 요청</h3>
                       <p>토스 자동결제를 등록하기 위해서는 사용자를 식별할 수 있는 고유한 빌링키를 생성해야 합니다.<br>
                          API 요청의 응답으로 성공 여부와 함께 토스 앱 인증 URL을 전달합니다.<br>
                          빌링키 생성 요청 API 사양은 다음과 같습니다.</p>
                      <div class="info">
                            <h4>endpoint</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    (POST)
                                </div>
                                <div class="desc">
                                  https://pay.toss.im/api/v1/billing-key <br/>
                                </div>
                            </div>
                        </div>
                        <div class="info">
                            <h4>parameters</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    apiKey
                                    <span class="type">string <font color=#c25300>필수</font></span>
                                    <span class="type">Max Length: 30 </span>
                                </div>
                                <div class="desc">
                                    가맹점 key
                                    <br>
                                    <span class="text-muted">웹 브라우저 혹은 외부에 노출되지 않도록 유의해 주시기 바랍니다.</span><br>
                                    <font color=#AA1212>테스트가 완료되면 운영 오픈 전 반드시 '실 거래용 Key'로 변경 후 체크해주세요!</font>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    userId
                                    <span class="type">string <font color=#c25300>필수</font></span>
                                    <span class="type">Max Length: 50 </span>
                                </div>
                                <div class="desc">
                                    가맹점 사용자 식별 값
                                    <br>
                                    <span class="text-muted">가맹점에서 사용자를 식별할 수 있는 유니크한 키</span><br>
                                    <span class="text-muted">가맹점에 저장된 회원 아이디를 활용할 수 있습니다.</span><br>
                                    <span class="text-muted">추후 결제 승인 정보와 매칭하기 위하여 필요하며 유니크한 값을 사용하길 권장합니다.(결제 주문번호의 개념)</span><br>
                                    <span class="text-muted">최대 50자로 지정하며 숫자, 영문자도 가능하되 특수문자는 _-:.^@= 만 허용합니다.</span><br>
                                </div>
                            </div>
                           <div class="field clearfix">
                                <div class="key">
                                    displayId
                                    <span class="type">string <font color=#c25300>필수</font></span>
                                    <span class="type">Max Length: 50 </span>
                                </div>
                                <div class="desc">
                                    다중 빌링키 식별 값
                                    <br>
                                    <span class="text-muted">빌링키의 경우 기본적으로 하나의 가맹점 - 하나의 토스 유저 - 하나의 빌링키 만 사용이 가능하지만, 가맹점에서 동일한 사람 (하나의 토스유저)이 여러개의 빌링키를 활용 이 가능 해야 한다면, 이 파라미터를 전달하여 여러개의 빌링키를 생성 할 수 있습니다.</span><br>
                                    <span class="text-muted">해당 값은 userId 와 함께 발급된 빌링키를 특정할 수 있는 값 이므로, 유니크한 값을 사용하길 권장합니다.</span><br>
                                    <span class="text-muted">최대 50자로 지정하며 숫자, 영문자도 가능하되 특수문자는 _-:.^@= 만 허용합니다.</span><br>
                                    <font color=#AA1212>만약 동일한 결제수단을 여러 번 등록하길 원하는 경우, displayId를 보내면서 userId를 다르게 보내면 토스 쪽에서는 가맹점의 서로 다른 유저에 대한 빌링키 등록으로 인식되어 동일한 결제수단을 여러 번 등록할 수 있게 됩니다.(userId를 동일한 값으로 보내는 경우 동일한 결제수단의 등록은 제한됩니다.)</font>
                                </div>
                            </div>
                          </div>
                </div>
            </div>  
     </div>
</body>
</html>
